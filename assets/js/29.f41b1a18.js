(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{306:function(t,s,a){"use strict";a.r(s);var e=a(14),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"使用-docker-部署生产网络"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-docker-部署生产网络"}},[t._v("#")]),t._v(" 使用 Docker 部署生产网络")]),t._v(" "),s("h2",{attrs:{id:"日志上限设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#日志上限设置"}},[t._v("#")]),t._v(" 日志上限设置")]),t._v(" "),s("p",[t._v("在单机环境上部署生产网络，每个节点所在的容器每时每刻都在产生日志，短时间内很容易占用 10 G  + 的空间")]),t._v(" "),s("h3",{attrs:{id:"docker-日志清理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-日志清理"}},[t._v("#")]),t._v(" docker 日志清理")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" docker-log-clear.sh\n")])])]),s("p",[t._v("写入：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"======== start clean docker containers logs ========"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("logs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),t._v(" /var/lib/docker/containers/ "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-name")]),t._v(" *-json.log"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[t._v("log")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$logs")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"clean logs : '),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$log")]),t._v('"')]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /dev/null "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$log")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"======== end clean docker containers logs ========"')]),t._v("\n")])])]),s("p",[t._v("保存，退出")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 给脚本添加可执行权")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x docker-log-clear.sh\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行脚本")]),t._v("\ndocker-log-clear.sh\n")])])]),s("h3",{attrs:{id:"容器单独日志上限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器单独日志上限"}},[t._v("#")]),t._v(" 容器单独日志上限")]),t._v(" "),s("p",[t._v("在 "),s("code",[t._v("docker-compose.yaml")]),t._v(" 中可以设置每个容器的日志上限：")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("nginx")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("1.12.1 \n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always \n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("logging")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("driver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" “json"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("file” \n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("max-size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" “500m” \n")])])]),s("h3",{attrs:{id:"全局设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#全局设置"}},[t._v("#")]),t._v(" 全局设置")]),t._v(" "),s("p",[t._v("新建/etc/docker/daemon.json，若有就不用新建了。")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/docker/daemon.json\n")])])]),s("p",[t._v("添加log-dirver和log-opts参数，样例如下：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ..."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"log-driver"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"json-file"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"log-opts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"max-size"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"500m"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"max-file"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("code",[t._v("max-size=500m")]),t._v("，意味着一个容器日志大小上限是500M，\n"),s("code",[t._v("max-file=3")]),t._v("，意味着一个容器有三个日志，分别是id+.json、id+1.json、id+2.json。")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启docker守护进程")]),t._v("\n\nsystemctl daemon-reload\n\nsystemctl restart "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v("\n")])])]),s("h2",{attrs:{id:"规划网络拓扑"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#规划网络拓扑"}},[t._v("#")]),t._v(" 规划网络拓扑")]),t._v(" "),s("p",[t._v("3 个 orderer 节点；组织 org1 , org1 下有两个 peer 节点， peer0 和 peer1; 组织 org2 , org2 下有两个 peer 节点， peer0 和 peer1;")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://mydoc-pics.oss-cn-chengdu.aliyuncs.com/img/up-38ef835b996d7793bb88ed5d61f2305d020.png",alt:"img"}})]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("节点")]),t._v(" "),s("th",[t._v("宿主机 IP")]),t._v(" "),s("th",[t._v("hosts")]),t._v(" "),s("th",[t._v("端口")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("cli")]),t._v(" "),s("td",[t._v("192.168.159.10")]),t._v(" "),s("td",[t._v("N/A")]),t._v(" "),s("td",[t._v("N/A")])]),t._v(" "),s("tr",[s("td",[t._v("orderer0")]),t._v(" "),s("td",[t._v("192.168.159.10")]),t._v(" "),s("td",[t._v("orderer0.example.com")]),t._v(" "),s("td",[t._v("7050")])]),t._v(" "),s("tr",[s("td",[t._v("orderer1")]),t._v(" "),s("td",[t._v("192.168.159.10")]),t._v(" "),s("td",[t._v("orderer1.example.com")]),t._v(" "),s("td",[t._v("8050")])]),t._v(" "),s("tr",[s("td",[t._v("orderer2")]),t._v(" "),s("td",[t._v("192.168.159.10")]),t._v(" "),s("td",[t._v("orderer2.example.com")]),t._v(" "),s("td",[t._v("9050")])])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("节点")]),t._v(" "),s("th",[t._v("宿主机 IP")]),t._v(" "),s("th",[t._v("hosts")]),t._v(" "),s("th",[t._v("端口")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("cli")]),t._v(" "),s("td",[t._v("192.168.159.10")]),t._v(" "),s("td",[t._v("N/A")]),t._v(" "),s("td",[t._v("N/A")])]),t._v(" "),s("tr",[s("td",[t._v("org1-peer0")]),t._v(" "),s("td",[t._v("192.168.159.10")]),t._v(" "),s("td",[t._v("peer0.org1.example.com")]),t._v(" "),s("td",[t._v("7051")])]),t._v(" "),s("tr",[s("td",[t._v("org1-peer1")]),t._v(" "),s("td",[t._v("192.168.159.10")]),t._v(" "),s("td",[t._v("peer1.org1.example.com")]),t._v(" "),s("td",[t._v("8051")])]),t._v(" "),s("tr",[s("td",[t._v("org2-peer0")]),t._v(" "),s("td",[t._v("192.168.159.10")]),t._v(" "),s("td",[t._v("peer0.org2.example.com")]),t._v(" "),s("td",[t._v("9051")])]),t._v(" "),s("tr",[s("td",[t._v("org2-peer1")]),t._v(" "),s("td",[t._v("192.168.159.10")]),t._v(" "),s("td",[t._v("peer1.org2.example.com")]),t._v(" "),s("td",[t._v("10051")])])])]),t._v(" "),s("p",[t._v("==注：在单机环境下模拟三个排序节点的部署，故每个节点需要区别端口号==")]),t._v(" "),s("p",[t._v("根据 IP 与 host ，在系统 hosts 文件中新增")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/hosts\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".159.10 orderer0.example.com\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".159.10 orderer1.example.com\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".159.10 orderer2.example.com\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 新增")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".159.10 peer0.org1.example.com\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".159.10 peer1.org1.example.com\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".159.10 peer0.org2.example.com\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".159.10 peer1.org2.example.com\n")])])]),s("blockquote",[s("p",[t._v("注意：部署过程中使用的 order、peer、tools 等镜像版本为 2.4.1，使用 2.5.x 版本的镜像在加入通道时可能会出现位置错误")])]),t._v(" "),s("h2",{attrs:{id:"部署-orderer-节点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署-orderer-节点"}},[t._v("#")]),t._v(" 部署 orderer 节点")]),t._v(" "),s("p",[t._v("使用 docker compose 部署 orderer 节点")]),t._v(" "),s("h3",{attrs:{id:"编写-orderer-节点-docker-compose-文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编写-orderer-节点-docker-compose-文件"}},[t._v("#")]),t._v(" 编写 orderer 节点 docker-compose 文件")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2.0'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cli")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" hyperledger/fabric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2.4.1\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" fabric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("cli\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hostname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" fabric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("cli\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("tty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("extra_hosts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer0.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer1.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer2.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer0.org1.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer1.org1.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer0.org2.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer1.org2.example.com:192.168.159.10"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_ID=fabric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("cli\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_ADDRESS=peer0.org1.example.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7051")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default to operate on peer0.org1")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_LOCALMSPID=Org1MSP\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/server.crt\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/server.key\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/fabric/crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" FABRIC_LOGGING_SPEC=DEBUG\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" FABRIC_LOGGING_FORMAT=%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("03x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("01"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("02 15"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("04"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("05.00 MST"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("shortfunc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("level"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(".4s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("reset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_TLS_ENABLED=true  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# to enable TLS, change to true")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_CA=/etc/hyperledger/fabric/crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/ordererOrganizations/example.com/orderers/orderer0.example.com/msp/tlscacerts/tlsca.example.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("cert.pem\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ../config/crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config.yaml"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/hyperledger/fabric/crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config.yaml\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ../config/configtx.yaml"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/hyperledger/fabric/configtx.yaml\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ../crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/hyperledger/fabric/crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ../channel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("artifacts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/tmp/channel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("artifacts\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ../chaincodes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/hyperledger/fabric/chaincodes\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("working_dir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /opt/gopath/src/github.com/hyperledger/fabric/peer\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("command")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bash "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("c 'cd /tmp; source scripts/func.sh; while true; do sleep 20170504; done'\n\n\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("orderer0.example.com")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# There can be multiple orderers")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" hyperledger/fabric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("orderer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2.4.1\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" orderer0.example.com\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hostname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" orderer0.example.com\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7050:7050"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8443:8443"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("extra_hosts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer0.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer1.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer2.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer0.org1.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer1.org1.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer0.org2.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer1.org2.example.com:192.168.159.10"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(' FABRIC_LOGGING_FORMAT="%'),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2006"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("01"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("02 15"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("04"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("05.000 MST"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("shortfunc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("level"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(".4s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("03x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("reset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v('"\n            '),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_LISTENADDRESS=0.0.0.0 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default: 127.0.0.1")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_LISTENPORT=7050\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_GENESISMETHOD=file "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default: provisional")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_BOOTSTRAPFILE=/etc/hyperledger/fabric/orderer.genesis.block "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# by default, all materials should be put under $FABRIC_CFG_PATH, which defaults to /etc/hyperledger/fabric")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_LOCALMSPID=OrdererMSP "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default: DEFAULT")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_LOCALMSPDIR=/etc/hyperledger/fabric/msp\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_LEDGERTYPE=file\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- ORDERER_GENERAL_LEDGERTYPE=json  # default: file")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_OPERATIONS_LISTENADDRESS=0.0.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8443")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# operation RESTful API")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_METRICS_PROVIDER=prometheus  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# prometheus will pull metrics from orderer via /metrics RESTful API")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- ORDERER_RAMLEDGER_HISTORY_SIZE=100  #only useful when use ram ledger")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# enabled TLS")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_TLS_ENABLED=true "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default: false")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_TLS_PRIVATEKEY=/etc/hyperledger/fabric/tls/server.key\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_TLS_CERTIFICATE=/etc/hyperledger/fabric/tls/server.crt\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_TLS_ROOTCAS="),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/etc/hyperledger/fabric/tls/ca.crt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Only required by raft mode")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY=/etc/hyperledger/fabric/tls/server.key\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE=/etc/hyperledger/fabric/tls/server.crt\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_CLUSTER_ROOTCAS="),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/etc/hyperledger/fabric/tls/ca.crt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" FABRIC_LOGGING_SPEC=DEBUG\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ../crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/ordererOrganizations/example.com/orderers/orderer0.example.com/msp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/hyperledger/fabric/msp\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ../crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/ordererOrganizations/example.com/orderers/orderer0.example.com/tls/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/hyperledger/fabric/tls\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ../channel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("artifacts/orderer.genesis.block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/hyperledger/fabric/orderer.genesis.block\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#            - /var/hyperledger/production:/var/hyperledger/production")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("expose")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7050"')]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# gRPC")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8443"')]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Operation REST")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("command")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" orderer start\n\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("orderer1.example.com")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" hyperledger/fabric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("orderer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2.4.1\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" orderer1.example.com\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hostname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" orderer1.example.com\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8050:7050"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8444:8443"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("extra_hosts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer0.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer1.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer2.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer0.org1.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer1.org1.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer0.org2.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer1.org2.example.com:192.168.159.10"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" FABRIC_LOGGING_SPEC=DEBUG\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(' FABRIC_LOGGING_FORMAT="%'),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2006"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("01"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("02 15"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("04"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("05.000 MST"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("shortfunc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("level"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(".4s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("03x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("reset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v('"\n            '),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_LISTENADDRESS=0.0.0.0 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default: 127.0.0.1")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_LISTENPORT=7050\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_GENESISMETHOD=file "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default: provisional")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_BOOTSTRAPFILE=/etc/hyperledger/fabric/orderer.genesis.block "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# by default, all materials should be put under $FABRIC_CFG_PATH, which defaults to /etc/hyperledger/fabric")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_LOCALMSPID=OrdererMSP "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default: DEFAULT")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_LOCALMSPDIR=/etc/hyperledger/fabric/msp\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_LEDGERTYPE=file\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- ORDERER_GENERAL_LEDGERTYPE=json  # default: file")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_OPERATIONS_LISTENADDRESS=0.0.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8443")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# operation RESTful API")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_METRICS_PROVIDER=prometheus  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# prometheus will pull metrics from orderer via /metrics RESTful API")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- ORDERER_RAMLEDGER_HISTORY_SIZE=100  #only useful when use ram ledger")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# enabled TLS")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_TLS_ENABLED=true "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default: false")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_TLS_PRIVATEKEY=/etc/hyperledger/fabric/tls/server.key\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_TLS_CERTIFICATE=/etc/hyperledger/fabric/tls/server.crt\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_TLS_ROOTCAS="),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/etc/hyperledger/fabric/tls/ca.crt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Only required by raft mode")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY=/etc/hyperledger/fabric/tls/server.key\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE=/etc/hyperledger/fabric/tls/server.crt\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_CLUSTER_ROOTCAS="),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/etc/hyperledger/fabric/tls/ca.crt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_CLUSTER_SENDBUFFERSIZE=10\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ../crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/ordererOrganizations/example.com/orderers/orderer1.example.com/msp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/hyperledger/fabric/msp\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ../crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/ordererOrganizations/example.com/orderers/orderer1.example.com/tls/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/hyperledger/fabric/tls\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ../channel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("artifacts/orderer.genesis.block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/hyperledger/fabric/orderer.genesis.block\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#            - /var/hyperledger/production:/var/hyperledger/production")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("command")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" orderer start    \n\n\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("orderer2.example.com")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" hyperledger/fabric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("orderer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2.4.1\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" orderer2.example.com\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hostname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" orderer2.example.com\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"9050:7050"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8445:8443"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("extra_hosts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer0.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer1.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer2.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer0.org1.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer1.org1.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer0.org2.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer1.org2.example.com:192.168.159.10"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" FABRIC_LOGGING_SPEC=DEBUG  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default: INFO")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(' FABRIC_LOGGING_FORMAT="%'),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2006"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("01"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("02 15"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("04"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("05.000 MST"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("shortfunc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("level"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(".4s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("03x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("reset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v('"\n            '),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_LISTENADDRESS=0.0.0.0 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default: 127.0.0.1")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_LISTENPORT=7050\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_GENESISMETHOD=file "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default: provisional")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_BOOTSTRAPFILE=/etc/hyperledger/fabric/orderer.genesis.block "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# by default, all materials should be put under $FABRIC_CFG_PATH, which defaults to /etc/hyperledger/fabric")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_LOCALMSPID=OrdererMSP "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default: DEFAULT")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_LOCALMSPDIR=/etc/hyperledger/fabric/msp\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_LEDGERTYPE=file\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- ORDERER_GENERAL_LEDGERTYPE=json  # default: file")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_OPERATIONS_LISTENADDRESS=0.0.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8443")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# operation RESTful API")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_METRICS_PROVIDER=prometheus  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# prometheus will pull metrics from orderer via /metrics RESTful API")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- ORDERER_RAMLEDGER_HISTORY_SIZE=100  #only useful when use ram ledger")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# enabled TLS")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_TLS_ENABLED=true "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default: false")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_TLS_PRIVATEKEY=/etc/hyperledger/fabric/tls/server.key\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_TLS_CERTIFICATE=/etc/hyperledger/fabric/tls/server.crt\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_TLS_ROOTCAS="),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/etc/hyperledger/fabric/tls/ca.crt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Only required by raft mode")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY=/etc/hyperledger/fabric/tls/server.key\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE=/etc/hyperledger/fabric/tls/server.crt\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_CLUSTER_ROOTCAS="),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/etc/hyperledger/fabric/tls/ca.crt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ORDERER_GENERAL_CLUSTER_SENDBUFFERSIZE=10\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ../crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/ordererOrganizations/example.com/orderers/orderer2.example.com/msp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/hyperledger/fabric/msp\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ../crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/ordererOrganizations/example.com/orderers/orderer2.example.com/tls/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/hyperledger/fabric/tls\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ../channel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("artifacts/orderer.genesis.block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/hyperledger/fabric/orderer.genesis.block\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#            - /var/hyperledger/production:/var/hyperledger/production")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("command")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" orderer start\n")])])]),s("blockquote",[s("p",[t._v("注：")]),t._v(" "),s("ul",[s("li",[t._v("在单机环境下部署，不同节点之间内部端口可以相同，但需要区分容器在宿主机中映射的端口")])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("orderer0.example.com")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7050:7050"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8443:8443"')]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("orderer1.example.com")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8050:7050"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8444:8443"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("        \n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("orderer2.example.com")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"9050:7050"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8445:8443"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n    \n")])])]),s("ul",[s("li",[t._v("修改 "),s("code",[t._v("volumes")]),t._v(" 中映射的宿主机目录为正确目录")])])]),t._v(" "),s("p",[t._v("启动 orderer 节点：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" docker-compose-3orderer.yaml up "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v("\n")])])]),s("p",[t._v("如果想停止并且删除服务：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" docker-compose-3orderer.yaml down\n")])])]),s("h2",{attrs:{id:"部署-org1-peer-节点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署-org1-peer-节点"}},[t._v("#")]),t._v(" 部署 org1 peer 节点")]),t._v(" "),s("h3",{attrs:{id:"编写-docker-compose-文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编写-docker-compose-文件"}},[t._v("#")]),t._v(" 编写 docker-compose 文件")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2.0'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("peer0.org2.example.com")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" hyperledger/fabric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("peer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2.4.1\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" peer0.org2.example.com\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hostname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" peer0.org2.example.com\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" 9051"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7051")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" 9052"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7052")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" 9445"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9443")]),t._v("\t\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("extra_hosts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer0.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer1.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer2.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer0.org1.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer1.org1.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer0.org2.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer1.org2.example.com:192.168.159.10"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" FABRIC_LOGGING_SPEC=INFO\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(' FABRIC_LOGGING_FORMAT="%'),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2006"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("01"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("02 15"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("04"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("05.000 MST"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("shortfunc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("level"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(".4s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("03x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("reset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v('"\n            '),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_ADDRESSAUTODETECT=false\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=host  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# uncomment this to use specific network")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_GOSSIP_USELEADERELECTION=true\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_GOSSIP_ORGLEADER=false  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# whether this node is the org leader, default to false")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_OPERATIONS_LISTENADDRESS=0.0.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9443")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# operation RESTful API")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_METRICS_PROVIDER=prometheus  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# prometheus will pull metrics from fabric via /metrics RESTful API")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_PROFILE_ENABLED=false\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_TLS_ENABLED=true\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_CHAINCODE_BUILDER=hyperledger/fabric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ccenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2.4.1\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_CHAINCODE_GOLANG_RUNTIME=hyperledger/fabric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("baseos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2.4.1\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_CHAINCODE_JAVA_RUNTIME=hyperledger/fabric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("javaenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2.4.1\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_CHAINCODE_NODE_RUNTIME=hyperledger/fabric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("nodeenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2.4.1\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_ID=peer0.org2.example.com\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_ADDRESS=peer0.org2.example.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9051")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7052")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_CHAINCODEADDRESS=peer0.org2.example.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9052")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0.org2.example.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9051")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_GOSSIP_BOOTSTRAP=peer0.org2.example.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9051")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_LOCALMSPID=Org2MSP\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" FABRIC_LOGGING_SPEC=DEBUG "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# info:core.chaincode=debug")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_LEDGER_STATE_STATEDATABASE=CouchDB\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=peer0.org2.couchdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5984")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME=admin\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD=adminpw\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /var/run/docker.sock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/var/run/docker.sock\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ../crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/msp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/hyperledger/fabric/msp\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ../crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/hyperledger/fabric/tls\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#            - /var/hyperledger/production:/var/hyperledger/production")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("expose")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"9051"')]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# gRPC")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"9445"')]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Operation REST")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#command: bash -c 'bash /tmp/peer_build.sh; peer node start'")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("command")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" peer node start\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("depends_on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" peer0.org2.couchdb\n\n\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("peer1.org2.example.com")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" hyperledger/fabric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("peer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2.4.1\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" peer1.org2.example.com\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hostname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" peer1.org2.example.com\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" 10051"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7051")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" 10052"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7052")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" 9446"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9443")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("extra_hosts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer0.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer1.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer2.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer0.org1.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer1.org1.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer0.org2.example.com:192.168.159.10"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peer1.org2.example.com:192.168.159.10"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" FABRIC_LOGGING_SPEC=INFO\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(' FABRIC_LOGGING_FORMAT="%'),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2006"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("01"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("02 15"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("04"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("05.000 MST"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("shortfunc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("level"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(".4s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("03x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("reset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v('"\n            '),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_ADDRESSAUTODETECT=false\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=host  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# uncomment this to use specific network")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_GOSSIP_USELEADERELECTION=true\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_GOSSIP_ORGLEADER=false  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# whether this node is the org leader, default to false")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_OPERATIONS_LISTENADDRESS=0.0.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9443")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# operation RESTful API")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_METRICS_PROVIDER=prometheus  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# prometheus will pull metrics from fabric via /metrics RESTful API")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_PROFILE_ENABLED=false\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_TLS_ENABLED=true\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_CHAINCODE_BUILDER=hyperledger/fabric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ccenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2.4.1\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_CHAINCODE_GOLANG_RUNTIME=hyperledger/fabric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("baseos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2.4.1\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_CHAINCODE_JAVA_RUNTIME=hyperledger/fabric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("javaenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2.4.1\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_CHAINCODE_NODE_RUNTIME=hyperledger/fabric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("nodeenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2.4.1\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_ID=peer1.org2.example.com\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_ADDRESS=peer1.org2.example.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10051")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7052")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_CHAINCODEADDRESS=peer1.org2.example.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10052")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer1.org2.example.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10051")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_GOSSIP_BOOTSTRAP=peer1.org2.example.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10051")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_PEER_LOCALMSPID=Org2MSP\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" FABRIC_LOGGING_SPEC=DEBUG "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# info:core.chaincode=debug")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_LEDGER_STATE_STATEDATABASE=CouchDB\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=peer1.org2.couchdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5984")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME=admin\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD=adminpw\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /var/run/docker.sock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/var/run/docker.sock\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ../crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/peerOrganizations/org2.example.com/peers/peer1.org2.example.com/msp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/hyperledger/fabric/msp\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ../crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/peerOrganizations/org2.example.com/peers/peer1.org2.example.com/tls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/hyperledger/fabric/tls\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#            - /var/hyperledger/production:/var/hyperledger/production")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("expose")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10051"')]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# gRPC")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"9446"')]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Operation REST")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#command: bash -c 'bash /tmp/peer_build.sh; peer node start'")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("command")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" peer node start\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("depends_on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" peer1.org2.couchdb\n\n\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("peer0.org2.couchdb")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" couchdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("3.1.1\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" peer0.org2.couchdb\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" 7984"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5984")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# this is the restful API addr, can also access fauxton web ui thru http://localhost:5984/_utils/")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" COUCHDB_USER=admin\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" COUCHDB_PASSWORD=adminpw\n\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("peer1.org2.couchdb")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" couchdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("3.1.1\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" peer1.org2.couchdb\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" 8984"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5984")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# this is the restful API addr, can also access fauxton web ui thru http://localhost:5984/_utils/")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" COUCHDB_USER=admin\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" COUCHDB_PASSWORD=adminpw\n")])])]),s("p",[t._v("启动 org2 peer 节点：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("docker-compose -f docker-compose-org2-2peer.yaml up -d\n")])])]),s("h2",{attrs:{id:"创建通道"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建通道"}},[t._v("#")]),t._v(" 创建通道")]),t._v(" "),s("p",[t._v("进入 cli 容器：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" fabric-cli "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("APP_CHANNEL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("businesschannel\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("TIMEOUT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_LOCALMSPID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Org1MSP\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_MSPCONFIGPATH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/etc/hyperledger/fabric/crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp\n\npeer channel create "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" orderer0.example.com:7050 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${APP_CHANNEL}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/tmp/channel-artifacts/'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$APP_CHANNEL")]),t._v('.tx"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--timeout")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${TIMEOUT}")]),t._v('s"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--tls")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--cafile")]),t._v(" /etc/hyperledger/fabric/crypto-config/ordererOrganizations/example.com/orderers/orderer0.example.com/msp/tlscacerts/tlsca.example.com-cert.pem\n")])])]),s("p",[t._v("创建成功后会在当前路径下生成 "),s("code",[t._v("businesschannel.block")]),t._v(" 文件。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("mv businesschannel.block /tmp/channel-artifacts/\n")])])]),s("h2",{attrs:{id:"加入通道"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加入通道"}},[t._v("#")]),t._v(" 加入通道")]),t._v(" "),s("p",[t._v("进入 cli 容器：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("docker exec -it fabric-cli bash\n")])])]),s("p",[t._v("org1-peer0 加入通道：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_TLS_ENABLED")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_LOCALMSPID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Org1MSP"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_TLS_ROOTCERT_FILE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/etc/hyperledger/fabric/crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_MSPCONFIGPATH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/etc/hyperledger/fabric/crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_ADDRESS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("peer0.org1.example.com:7051\n\npeer channel "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-b")]),t._v(" /tmp/channel-artifacts/businesschannel.block\n")])])]),s("p",[t._v("结果如下：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("020 02-18 03:57:28.30 UTC"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("channelCmd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" executeJoin -"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" INFO Successfully submitted proposal to "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),t._v(" channel\n")])])]),s("p",[t._v("org1-peer1 加入通道：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_TLS_ENABLED")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_LOCALMSPID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Org1MSP"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_TLS_ROOTCERT_FILE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/etc/hyperledger/fabric/crypto-config/peerOrganizations/org1.example.com/peers/peer1.org1.example.com/tls/ca.crt\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_MSPCONFIGPATH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/etc/hyperledger/fabric/crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_ADDRESS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("peer1.org1.example.com:8051\n\npeer channel "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-b")]),t._v(" /tmp/channel-artifacts/businesschannel.block\n")])])]),s("p",[t._v("org2-peer0 加入通道：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_TLS_ENABLED")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_LOCALMSPID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Org2MSP"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_TLS_ROOTCERT_FILE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/etc/hyperledger/fabric/crypto-config/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_MSPCONFIGPATH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/etc/hyperledger/fabric/crypto-config/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_ADDRESS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("peer0.org2.example.com:9051\n\npeer channel "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-b")]),t._v(" /tmp/channel-artifacts/businesschannel.block\n")])])]),s("p",[t._v("org2-peer1 加入通道：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_TLS_ENABLED")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_LOCALMSPID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Org2MSP"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_TLS_ROOTCERT_FILE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/etc/hyperledger/fabric/crypto-config/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_MSPCONFIGPATH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/etc/hyperledger/fabric/crypto-config/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_ADDRESS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("peer1.org2.example.com:10051\n\npeer channel "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-b")]),t._v(" /tmp/channel-artifacts/businesschannel.block\n")])])]),s("h2",{attrs:{id:"更新锚节点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新锚节点"}},[t._v("#")]),t._v(" 更新锚节点")]),t._v(" "),s("p",[t._v("org1 更新锚节点：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_TLS_ENABLED")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_LOCALMSPID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Org1MSP"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_TLS_ROOTCERT_FILE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/etc/hyperledger/fabric/crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_MSPCONFIGPATH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/etc/hyperledger/fabric/crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_ADDRESS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("peer0.org1.example.com:7051\n\npeer channel update "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" orderer0.example.com:7050 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" businesschannel "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" /tmp/channel-artifacts/Org1MSPanchors.tx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--tls")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--cafile")]),t._v(" /etc/hyperledger/fabric/crypto-config/ordererOrganizations/example.com/orderers/orderer0.example.com/msp/tlscacerts/tlsca.example.com-cert.pem\n")])])]),s("p",[t._v("org2 更新锚节点：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_TLS_ENABLED")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_LOCALMSPID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Org2MSP"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_TLS_ROOTCERT_FILE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/etc/hyperledger/fabric/crypto-config/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_MSPCONFIGPATH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/etc/hyperledger/fabric/crypto-config/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CORE_PEER_ADDRESS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("peer0.org2.example.com:9051\n\npeer channel update "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" orderer0.example.com:7050 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" businesschannel "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" /tmp/channel-artifacts/Org2MSPanchors.tx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--tls")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--cafile")]),t._v(" /etc/hyperledger/fabric/crypto-config/ordererOrganizations/example.com/orderers/orderer0.example.com/msp/tlscacerts/tlsca.example.com-cert.pem\n")])])]),s("p",[t._v("锚节点配置更新后，同一通道内不同组织之间的 Peer 也可以进行 Gossip 通信，共同维护通道账本。后续，用户可以通过智能合约使用通道账本。")])])}),[],!1,null,null,null);s.default=n.exports}}]);