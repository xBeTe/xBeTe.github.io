(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{312:function(t,a,s){"use strict";s.r(a);var n=s(14),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"搭建以太坊私链"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建以太坊私链"}},[t._v("#")]),t._v(" 搭建以太坊私链")]),t._v(" "),a("h2",{attrs:{id:"go-ethereum下载安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#go-ethereum下载安装"}},[t._v("#")]),t._v(" Go Ethereum下载安装")]),t._v(" "),a("h3",{attrs:{id:"压缩包安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#压缩包安装"}},[t._v("#")]),t._v(" 压缩包安装")]),t._v(" "),a("p",[t._v("下载地址：https://geth.ethereum.org/downloads/")]),t._v(" "),a("p",[t._v("下载编译好的压缩包"),a("code",[t._v("Geth & Tools 1.11.5")]),t._v("，解压后将 Geth 和其他组件移动到")]),t._v(" "),a("p",[a("code",[t._v("/usr/bin")])]),t._v(" "),a("p",[t._v("查看 geth 版本")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("geth version\n")])])]),a("h3",{attrs:{id:"源码安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#源码安装"}},[t._v("#")]),t._v(" 源码安装")]),t._v(" "),a("h4",{attrs:{id:"安装-golang"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-golang"}},[t._v("#")]),t._v(" 安装 Golang")]),t._v(" "),a("p",[t._v("go 版本可从官网查询https://golang.google.cn/dl/")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://storage.googleapis.com/golang/go1.10.2.linux-amd64.tar.gz\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-C")]),t._v(" /usr/local "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-zxzf")]),t._v(" go1.10.2.linux-amd64.tar.gz\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"export GOROOT=/usr/local/go"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /etc/profile\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"export PATH=/usr/local/go/bin:'),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /etc/profile\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /etc/profile\n")])])]),a("p",[t._v("验证 go 版本")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("go version\n")])])]),a("h4",{attrs:{id:"下载-go-ethereum-源码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载-go-ethereum-源码"}},[t._v("#")]),t._v(" 下载 go-ethereum 源码")]),t._v(" "),a("blockquote",[a("p",[t._v("注意：git clone 为最新版本")])]),t._v(" "),a("blockquote",[a("p",[t._v("注意：新版本中 personal 和 miner 模块已经弃用，在账户管理和挖矿（过度到 PoS 后，关闭了挖矿）上有区别")])]),t._v(" "),a("p",[t._v("GitHub 下载老版本 https://github.com/ethereum/go-ethereum/releases/tag/v1.9.3")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-C")]),t._v(" /usr/local "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-zxvf")]),t._v(" go-ethereum-1.9.3.tat.gz\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" go-ethereum-1.9.3\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" all\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"export PATH='),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),t._v(':/usr/local/go-ethereum-1.9.3/build/bin"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /etc/profile\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /etc/profile\n")])])]),a("p",[t._v("检查 geth 版本")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("geth version\n")])])]),a("h2",{attrs:{id:"编写genesis-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写genesis-json"}},[t._v("#")]),t._v(" 编写genesis.json")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"config"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"chainId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("88")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//该链的ID。在用geth 启动区块链时，还需要指定一个network 参数。只有当network、chainID、创世区块配置都相同时，才是同一条链。")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"homesteadBlock"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//相关协议机制的升级区块所在的高度，签名算法是homestead ->eip155 -> eip158，所以从homesteadBlock 之前区块都通过homestead 相关算法机制来验证，homesteadBlock 到eip155Block 之间的用eip155 算法来验证，依次类推。")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eip150Block"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eip155Block"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eip158Block"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"coinbase"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x0000000000000000000000000000000000000000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//每挖出一个区块，都会获得奖励。该值指定默认情况下把奖励给到哪个账户。实际上，我们每次挖矿开始之前，都会自己指定miner.setEtherbase(UserAddress)，一般都会把奖励给自己")]),t._v("\n\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"difficulty"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x40000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//定义了每次挖矿时，最终确定nonce 的难度")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"extraData"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gasLimit"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xffffffff"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//规定该区块链中，gas 的上限")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nonce"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x0000000000000042"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//预定一个随机数，这是一个与PoW 机制有关的值")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mixhash"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x0000000000000000000000000000000000000000000000000000000000000000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//一个与PoW 机制有关的值")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"parentHash"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x0000000000000000000000000000000000000000000000000000000000000000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在区块链中，区块是相连的，parentHash 指定了本区块的上一个区块Hash。对于创世区块来说，parentHash 为0")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"timestamp"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x00"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 时间戳，规定创世区块开始的时间")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"alloc"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"0x0930167EdA15D561F466D01FA08D89D00d3298e4"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"balance"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3000000000000000000"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//代表初始资产配置，在该区块链产生时，就预先赋予这些账户一定数额的WEI（不是ETH）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("vim [yourChainDir]/genesis.json\n")])])]),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"config"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"chainId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("88")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"homesteadBlock"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eip150Block"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eip155Block"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eip158Block"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"coinbase"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x0000000000000000000000000000000000000000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"difficulty"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x2000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"extraData"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gasLimit"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xffffffff"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nonce"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x0000000000000042"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mixhash"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x0000000000000000000000000000000000000000000000000000000000000000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"parentHash"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x0000000000000000000000000000000000000000000000000000000000000000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"timestamp"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x00"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"alloc"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"0x0930167EdA15D561F466D01FA08D89D00d3298e4"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"balance"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3000000000000000000"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"初始化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始化"}},[t._v("#")]),t._v(" 初始化")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("yourChainDir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("/\ngeth "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--datadir")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("datadir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" init genesis.json\n")])])]),a("p",[a("code",[t._v("[yourDataDir]")]),t._v("：当前链的数据目录")]),t._v(" "),a("h2",{attrs:{id:"启动链"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动链"}},[t._v("#")]),t._v(" 启动链")]),t._v(" "),a("h3",{attrs:{id:"_1、console"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、console"}},[t._v("#")]),t._v(" 1、console")]),t._v(" "),a("p",[t._v("启动geth节点时，使用console参数，该参数启动交互式JavaScript环境。")]),t._v(" "),a("p",[t._v("并将日志输出到当前目录的 "),a("code",[t._v("geth.log")])]),t._v(" "),a("p",[t._v("比如：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("geth "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--datadir")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("yourDataDir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--networkid")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("yourChainId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" console "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" eth.log\n")])])]),a("p",[a("code",[t._v("[yourChainId]")]),t._v("："),a("code",[t._v("genesis.json")]),t._v("中配置的"),a("code",[t._v('"chainId": 88')])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("geth "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--datadir")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--networkid")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("88")]),t._v(" console "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">>")]),t._v("eth.log\n")])])]),a("blockquote",[a("p",[t._v("xxz11.networkid = 88, xxz12.networkid = 8848")])]),t._v(" "),a("h3",{attrs:{id:"_2、attach"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、attach"}},[t._v("#")]),t._v(" 2、attach")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("geth "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--datadir")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("yourDataDir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rpc")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rpcport")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8545")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rpcaddr")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.0.0.0"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rpcapi")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"personal,eth,net,web3,admin"')]),t._v("  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rpccorsdomain")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--networkid")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("yourChainId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("geth "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--datadir")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rpc")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rpcport")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8545")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rpcapi")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"personal,eth,net,web3,admin"')]),t._v("  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rpccorsdomain")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--networkid")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("88")]),t._v("\n")])])]),a("p",[t._v("也可以通过attach命令进入指定节点，该参数通过连接已知节点，启动交互式JavaScript环境。比如本机已经启动节点，通常可以用以下方式进入命令界面：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("geth attach ipc:/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("yourDataDir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("/geth.ipc\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("geth attach ipc:./geth.ipc\n")])])]),a("h2",{attrs:{id:"创建新账号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建新账号"}},[t._v("#")]),t._v(" 创建新账号")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Public address of the key:\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxz11")]),t._v("\n0x7B6a8f8e474dD30054fc100Eb3627db8D0c08E7F\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xxz12")]),t._v("\n0x9ac375673d1c9667cbd23b8a74937db8f339ad6f\n\n")])])]),a("p",[t._v("老版本使用 personal 对象管理账户")]),t._v(" "),a("h4",{attrs:{id:"personal-newaccount"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#personal-newaccount"}},[t._v("#")]),t._v(" personal.newAccount")]),t._v(" "),a("p",[t._v("方法生成一个新的私钥并直接存入密钥库目录。密钥文件使用指定的密钥加密。")]),t._v(" "),a("p",[t._v("该方法需要在启动geth时--rpcapi包含了personal；")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("personal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("newAccount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//直接使用密码")]),t._v("\npersonal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("newAccount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//控制台提示输入密码并确认")]),t._v("\n")])])]),a("p",[t._v("本文示例：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("personal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("newAccount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"123456"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x38d8b866a1abebca20afc004622f5355eefeb568"')]),t._v("\npersonal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("newAccount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Passphrase")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\nRepeat passphrase"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xda25997b15a6bea86116942b8ab69a5620d82284"')]),t._v("\n")])])]),a("h4",{attrs:{id:"personal-unlockaccount"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#personal-unlockaccount"}},[t._v("#")]),t._v(" personal.unlockAccount")]),t._v(" "),a("p",[t._v("方法对密码库中指定地址对应的密钥进行解密。")]),t._v(" "),a("p",[t._v("当使用Geth的JavaScript 控制台时，账户默认是锁定状态；")]),t._v(" "),a("p",[t._v("尝试解锁时，密码和解锁时长都是可选的，默认的解锁周期为300秒。如果未提供密码，控制台将提示交互输密码。")]),t._v(" "),a("p",[t._v("解密的密钥将保存在内存中直到解锁周期超时。显示地将解锁周期设置为0秒将解锁该密钥直到退出geth程序。")]),t._v(" "),a("p",[t._v("账号解锁后可以用于签名（eth_sign）和发送交易（eth_sendTransaction）调用。")]),t._v(" "),a("p",[t._v("方式一：指定解锁账户地址，交互方式输入密码，默认解锁300秒")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("personal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlockAccount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x38d8b866a1abebca20afc004622f5355eefeb568"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n")])])]),a("p",[t._v("方式二：指定本地具体账户，交互方式输入密码，默认解锁300秒")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("personal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlockAccount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n")])])]),a("p",[t._v("方式三：指定解锁账户地址，解锁10分钟")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("personal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlockAccount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"123456"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("600")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n")])])]),a("p",[t._v("方式四：指定解锁账户地址，交互方式输入密码，解锁10分钟")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("personal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlockAccount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("600")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n")])])]),a("p",[t._v("方式五：指定解锁账户地址，关闭geth前一直解锁状态")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("personal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlockAccount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"123456"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n")])])]),a("p",[t._v("本文示例：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("personal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlockAccount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nUnlock account "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x38d8b866a1abebca20afc004622f5355eefeb568")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Passphrase")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\npersonal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlockAccount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"123456"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("注意：在最新版本（Geth1.9.14）中，当执行personal.unlockAccount()或在程序中调用personal_unlockAccount接口时，会出现：account unlock with HTTP access is forbidden异常。")])]),t._v(" "),a("p",[t._v('如果已经了解打开此功能的风险，可通过在geth启动命令中添加参数"--allow-insecure-unlock"实现正常解锁：')]),t._v(" "),a("p",[t._v("geth --allow-insecure-unlock")]),t._v(" "),a("h4",{attrs:{id:"personal-lockaccount"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#personal-lockaccount"}},[t._v("#")]),t._v(" personal.lockAccount")]),t._v(" "),a("p",[t._v("方法从内存中移除指定地址对应的私钥，该账户将不能再发送交易。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("personal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("lockAccount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x38d8b866a1abebca20afc004622f5355eefeb568"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    \n")])])]),a("p",[t._v("或者")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("personal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("lockAccount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("本文示例：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("personal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("lockAccount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n")])])]),a("h4",{attrs:{id:"personal-listaccounts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#personal-listaccounts"}},[t._v("#")]),t._v(" personal.listAccounts")]),t._v(" "),a("p",[t._v("方法返回密钥库中所有密钥对应的以太坊账户地址。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("personal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("listAccounts\n")])])]),a("p",[t._v("本文示例：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("personal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("listAccounts\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x0297a8913cc187d60712f095a7e1bf2421bfcd40"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x38d8b866a1abebca20afc004622f5355eefeb568"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xda25997b15a6bea86116942b8ab69a5620d82284"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h4",{attrs:{id:"personal-sendtransaction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#personal-sendtransaction"}},[t._v("#")]),t._v(" personal.sendTransaction")]),t._v(" "),a("p",[t._v("方法验证指定的密码并提交交易，该方法的交易参数与eth_sendTransaction一样，同时包含from账户地址。")]),t._v(" "),a("p",[t._v("如果密码可以成功解密交易中from地址对应的私钥，那么该方法将验证交易、 签名并广播到以太坊网络中。")]),t._v(" "),a("p",[t._v("由于在sendTransaction方法调用时，from账户并未在节点中全局解锁 （仅在该调用内解锁），因此from账户不能用于其他RPC调用。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("personal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendTransaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" passphrase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("本文示例：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBalance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.000000000001e+24")]),t._v("\npersonal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlockAccount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"123456"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\npersonal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendTransaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("from")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("to")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xda25997b15a6bea86116942b8ab69a5620d82284"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000000000000000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//默认最小单位")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xda469a3221a34ce81010b9cfc4df66e5d9cbffd46c670fe7c5da1a263aa4e62b"')]),t._v("\neth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBalance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9.9999799998e+23")]),t._v("\neth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBalance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xda25997b15a6bea86116942b8ab69a5620d82284"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000000000000000000")]),t._v("\n\npersonal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendTransaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("from")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("to")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xda25997b15a6bea86116942b8ab69a5620d82284"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toWei")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.23")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ether"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//自定义以太单位")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x20e5eca5dd2671fa528958705aa3045dc8d6cf79374a50794dd18a9bb76ea2fc"')]),t._v("\n")])])]),a("p",[t._v('通过示例可以看出：1.发送的单位默认是最小单位"wei"；用户也可以指定单位；2.该交易支付了gas费；')]),t._v(" "),a("p",[t._v("新版本 geth 在 JS 控制台中无法使用 personal 对象，无法创建账户")]),t._v(" "),a("p",[t._v("https://geth.ethereum.org/docs/interacting-with-geth/rpc/ns-personal")]),t._v(" "),a("p",[t._v("使用 bash 命令：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("geth account new "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--datadir")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("yourDataDir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Your new account is locked with a password. Please give a password. Do not forget this password.\nPassword: \nRepeat password: \n\nYour new key was generated\n\nPublic address of the key:   0x7B6a8f8e474dD30054fc100Eb3627db8D0c08E7F\nPath of the secret key file: keystore/UTC--2023-04-11T14-18-49.867009581Z--7b6a8f8e474dd30054fc100eb3627db8d0c08e7f\n\n- You can share your public address with anyone. Others need it to interact with you.\n- You must NEVER share the secret key with anyone"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" The key controls access to your funds"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n- You must BACKUP your key file"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" Without the key, it"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s impossible to access account funds!\n- You must REMEMBER your password! Without the password, it'")]),t._v("s impossible to decrypt the key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n\n")])])]),a("p",[t._v("使用geth的account命令管理账户，例如创建新账户、更新账户密码、查询账户等：")]),t._v(" "),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[t._v("geth account <command> [options...] [arguments...]\n")])])]),a("h4",{attrs:{id:"命令-command"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令-command"}},[t._v("#")]),t._v(" 命令 - command")]),t._v(" "),a("ul",[a("li",[t._v("list 列表显示现有账户")]),t._v(" "),a("li",[t._v("new 创建一个新的账户")]),t._v(" "),a("li",[t._v("update 修改账户")]),t._v(" "),a("li",[t._v("import 导入私钥创建新账户")])]),t._v(" "),a("p",[t._v("可以使用"),a("code",[t._v("--help")]),t._v("获取这些命令的帮助信息，例如：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("~$ geth account list "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--help")]),t._v(" \n\nlist "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("command options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("arguments"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h4",{attrs:{id:"options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options"}},[t._v("#")]),t._v(" OPTIONS:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("--datadir")]),t._v(' "/home/bas/.ethereum" Data directory for the databases and keystore')]),t._v(" "),a("li",[a("code",[t._v("--keystore")]),t._v(" Directory for the keystore (default = inside the datadir)")])]),t._v(" "),a("h4",{attrs:{id:"创建新账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建新账户"}},[t._v("#")]),t._v(" 创建新账户")]),t._v(" "),a("p",[t._v("使用"),a("code",[t._v("geth account new")]),t._v("命令新建账户：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ geth account new\n")])])]),a("h4",{attrs:{id:"导入私钥创建新账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导入私钥创建新账户"}},[t._v("#")]),t._v(" 导入私钥创建新账户")]),t._v(" "),a("p",[t._v("可以使用"),a("code",[t._v("geth account import")]),t._v("命令，通过导入私钥来创建一个新账户，")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("~$ geth account "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--datadir")]),t._v(" /someOtherEthDataDir ./key.prv \n")])])]),a("h4",{attrs:{id:"更新账户密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新账户密码"}},[t._v("#")]),t._v(" 更新账户密码")]),t._v(" "),a("p",[t._v("使用"),a("code",[t._v("geth account update")]),t._v("命令来更新指定账户的密码：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("~$ geth account update a94f5374fce5edbc8e2a8697c15331677e6ebf0b\n")])])]),a("h4",{attrs:{id:"显示已有账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#显示已有账户"}},[t._v("#")]),t._v(" 显示已有账户")]),t._v(" "),a("p",[t._v("使用"),a("code",[t._v("geth account list")]),t._v("命令列表显示已有账户，可选的可以使用"),a("code",[t._v("--keystore")]),t._v("指定keystore目录：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("~$ geth account list "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--keystore")]),t._v(" /tmp/mykeystore/\n")])])]),a("h2",{attrs:{id:"开始-mining"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始-mining"}},[t._v("#")]),t._v(" 开始 mining")]),t._v(" "),a("h3",{attrs:{id:"设置-coinbase"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置-coinbase"}},[t._v("#")]),t._v(" 设置 coinbase")]),t._v(" "),a("p",[a("code",[t._v("miner.setEtherbase(accountAddress)")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将客户端中第一个账户接收挖矿奖励")]),t._v("\nminer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEtherbase")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 查看 coinbase ")]),t._v("\neth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("coinbase\n")])])]),a("h3",{attrs:{id:"开始-结束-mining"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始-结束-mining"}},[t._v("#")]),t._v(" 开始/结束 mining")]),t._v(" "),a("p",[a("code",[t._v("miner.start([option] threadNumber)")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开始 mining")]),t._v("\nminer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开启1个线程 mining")]),t._v("\nminer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 查看最新区块")]),t._v("\neth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("blockNumber\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 结束mining")]),t._v("\nminer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"设置额外数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置额外数据"}},[t._v("#")]),t._v(" 设置额外数据")]),t._v(" "),a("p",[a("code",[t._v("miner.setExtra(string)")]),t._v("：方法用来设置要包含在挖出区块中的额外的数据，最多32个字节。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("miner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setExtra")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"开启-http-访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启-http-访问"}},[t._v("#")]),t._v(" 开启 http 访问")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# old")]),t._v("\ngeth "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--datadir")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--networkid")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("88")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rpc")]),t._v(" console "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">>")]),t._v("eth.log\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# new")]),t._v("\ngeth "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--datadir")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--networkid")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("88")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--http")]),t._v(" console "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">>")]),t._v("eth.log\n")])])]),a("p",[t._v("默认 HTTP 端口：8545")]),t._v(" "),a("p",[t._v("当需要需要从宿主机的 metamask 钱包连接虚拟机私链，需要指定：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("访问私链的 url："),a("code",[t._v("rpcaddr/http.addr = 0.0.0.0")]),t._v("， "),a("code",[t._v("url = 0.0.0.0:8545")])])]),t._v(" "),a("li",[a("p",[t._v("允许访问的主机名："),a("code",[t._v("rpcvhsot/http.vhosts = *")]),t._v("， “*”为通配符，允许所有主机访问")])]),t._v(" "),a("li",[a("p",[t._v("必要时，可以开启允许跨域访问： "),a("code",[t._v("--rpccorsdomain/http.corsdomain = *")]),t._v("，“*”为通配符，允许所有地址跨域访问")])])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# old")]),t._v("\ngeth "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--datadir")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--networkid")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8848")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rpc")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rpcaddr")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rpcvhosts")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rpccorsdomain")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*'")]),t._v(" console "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">>")]),t._v("geth-output.log\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# new")]),t._v("\ngeth "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--datadir")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--networkid")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("88")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--http")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--http.addr")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--http.vhosts")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--http.corsdomain")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*'")]),t._v("  console "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">>")]),t._v("eth.log\n\n")])])]),a("h2",{attrs:{id:"转账"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#转账"}},[t._v("#")]),t._v(" 转账")]),t._v(" "),a("p",[t._v("解锁发起交易的账户")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("personal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlockAccount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在开启 http 访问下不可用")]),t._v("\n")])])]),a("p",[t._v("发起交易，使用 geth 已有账户发送")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendTransaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("from")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("to")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0x0930167EdA15D561F466D01FA08D89D00d3298e4'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toWei")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ether'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回值：交易的 hash")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xd9d09bde6edf5f56e94aae0a9365acc64759c4a3e68918e6db3a777d16bd65e8"')]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);