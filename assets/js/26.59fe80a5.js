(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{305:function(t,e,s){"use strict";s.r(e);var a=s(14),n=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"搭建-fabric-生产网络"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#搭建-fabric-生产网络"}},[t._v("#")]),t._v(" 搭建 Fabric 生产网络")]),t._v(" "),e("p",[t._v("相关链接：")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://hyperledger-fabric.readthedocs.io/en/release-2.5/deployment_guide_overview.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Fabric 文档"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://hyperledger-fabric.readthedocs.io/zh-cn/release-2.5/deployment_guide_overview.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Fabric 中文文档"),e("OutboundLink")],1)])]),t._v(" "),e("blockquote",[e("p",[t._v("文档来源于B 站"),e("a",{attrs:{href:"https://www.bilibili.com/video/BV1ZR4y1M7yH",target:"_blank",rel:"noopener noreferrer"}},[t._v("视频教程（For Java SDK）"),e("OutboundLink")],1),t._v("，UP 主"),e("a",{attrs:{href:"https://my.oschina.net/j4love",target:"_blank",rel:"noopener noreferrer"}},[t._v("博客主页"),e("OutboundLink")],1)])]),t._v(" "),e("blockquote",[e("p",[t._v("准备工作："),e("a",{attrs:{href:"https://github.com/hyperledger/fabric/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载 fabric 发行版"),e("OutboundLink")],1),t._v(" （示例版本 v2.4.4），并解压。")])]),t._v(" "),e("h1",{attrs:{id:"生成网络需要的身份文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生成网络需要的身份文件"}},[t._v("#")]),t._v(" 生成网络需要的身份文件")]),t._v(" "),e("h2",{attrs:{id:"规划网络拓扑"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#规划网络拓扑"}},[t._v("#")]),t._v(" 规划网络拓扑")]),t._v(" "),e("p",[t._v("3 个 orderer 节点；组织 org1 , org1 下有两个 peer 节点， peer0 和 peer1; 组织 org2 , org2 下有两个 peer 节点， peer0 和 peer1")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://mydoc-pics.oss-cn-chengdu.aliyuncs.com/img/up-283009bb3945ac505b25ca058a173e52789.png",alt:"img"}})]),t._v(" "),e("blockquote",[e("p",[t._v("Fabric 项目还提供了 "),e("code",[t._v("cryptogen")]),t._v(" 工具来在本地生身份文件，这种方式需要提供一个 "),e("code",[t._v("crypto-config.yaml")]),t._v(" 配置文件。")])]),t._v(" "),e("h3",{attrs:{id:"准备-crypto-config-yaml-文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#准备-crypto-config-yaml-文件"}},[t._v("#")]),t._v(" 准备 "),e("code",[t._v("crypto-config.yaml")]),t._v(" 文件")]),t._v(" "),e("p",[t._v("在解压后的"),e("code",[t._v("bin/")]),t._v("目录下，使用命令：")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("./cryptogen showtemplate  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/crypto-config.yaml\n")])])]),e("p",[t._v("获取"),e("code",[t._v("crypto-config.yaml")])]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "OrdererOrgs" - Definition of organizations managing orderer nodes')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("OrdererOrgs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Orderer")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Orderer\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Domain")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" example.com\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("EnableNodeOUs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "Specs" - See PeerOrgs below for complete description')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Specs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Hostname")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" orderer\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "PeerOrgs" - Definition of organizations managing peer nodes')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PeerOrgs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Org1")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Org1\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Domain")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" org1.example.com\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("EnableNodeOUs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "CA"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Uncomment this section to enable the explicit definition of the CA for this")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# organization.  This entry is a Spec.  See "Specs" section below for details.')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# CA:")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    Hostname: ca # implicitly ca.org1.example.com")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    Country: US")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    Province: California")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    Locality: San Francisco")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    OrganizationalUnit: Hyperledger Fabric")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    StreetAddress: address for org # default nil")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    PostalCode: postalCode for org # default nil")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "Specs"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Uncomment this section to enable the explicit definition of hosts in your")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# configuration.  Most users will want to use Template, below")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Specs is an array of Spec entries.  Each Spec entry consists of two fields:")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   - Hostname:   (Required) The desired hostname, sans the domain.")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   - CommonName: (Optional) Specifies the template or explicit override for")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                 the CN.  By default, this is the template:")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#                              "{{.Hostname}}.{{.Domain}}"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                 which obtains its values from the Spec.Hostname and")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                 Org.Domain, respectively.")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   - SANS:       (Optional) Specifies one or more Subject Alternative Names")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                 to be set in the resulting x509. Accepts template")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                 variables {{.Hostname}}, {{.Domain}}, {{.CommonName}}. IP")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                 addresses provided here will be properly recognized. Other")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                 values will be taken as DNS names.")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                 NOTE: Two implicit entries are created for you:")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                     - {{ .CommonName }}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                     - {{ .Hostname }}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Specs:")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   - Hostname: foo # implicitly "foo.org1.example.com"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     CommonName: foo27.org5.example.com # overrides Hostname-based FQDN set above")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     SANS:")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#       - "bar.{{.Domain}}"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#       - "altfoo.{{.Domain}}"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#       - "{{.Hostname}}.org6.net"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#       - 172.16.10.31")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   - Hostname: bar")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   - Hostname: baz")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "Template"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Allows for the definition of 1 or more hosts that are created sequentially")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# from a template. By default, this looks like "peer%d" from 0 to Count-1.')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# You may override the number of nodes (Count), the starting index (Start)")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or the template used to construct the name (Hostname).")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Note: Template and Specs are not mutually exclusive.  You may define both")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# sections and the aggregate nodes will be created for you.  Take care with")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# name collisions")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Template")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Count")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Start: 5")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Hostname: {{.Prefix}}{{.Index}} # default")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# SANS:")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   - "{{.Hostname}}.alt.{{.Domain}}"')]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "Users"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Count: The number of user accounts _in addition_ to Admin")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Users")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Count")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# Org2: See "Org1" for full specification')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Org2\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Domain")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" org2.example.com\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("EnableNodeOUs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Template")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Count")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Users")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Count")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n")])])]),e("p",[t._v("根据网络拓扑修改"),e("code",[t._v("crypto-config.yaml")])]),t._v(" "),e("ul",[e("li",[t._v("根据 order 服务组织的节点数修改 "),e("code",[t._v("Specs")]),t._v("字段下的主机名")]),t._v(" "),e("li",[t._v("根据两个组织的节点数，修改每个组织的 "),e("code",[t._v("Templeate.Count")]),t._v(" 字段")])]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "OrdererOrgs" - Definition of organizations managing orderer nodes')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("OrdererOrgs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Orderer")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Orderer\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Domain")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" example.com\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("EnableNodeOUs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "Specs" - See PeerOrgs below for complete description')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Specs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Hostname")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" orderer0\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Hostname")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" orderer1\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Hostname")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" orderer2\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "PeerOrgs" - Definition of organizations managing peer nodes')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PeerOrgs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Org1")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Org1\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Domain")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" org1.example.com\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("EnableNodeOUs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "CA"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Uncomment this section to enable the explicit definition of the CA for this")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# organization.  This entry is a Spec.  See "Specs" section below for details.')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# CA:")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    Hostname: ca # implicitly ca.org1.example.com")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    Country: US")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    Province: California")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    Locality: San Francisco")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    OrganizationalUnit: Hyperledger Fabric")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    StreetAddress: address for org # default nil")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    PostalCode: postalCode for org # default nil")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "Specs"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Uncomment this section to enable the explicit definition of hosts in your")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# configuration.  Most users will want to use Template, below")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Specs is an array of Spec entries.  Each Spec entry consists of two fields:")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   - Hostname:   (Required) The desired hostname, sans the domain.")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   - CommonName: (Optional) Specifies the template or explicit override for")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                 the CN.  By default, this is the template:")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#                              "{{.Hostname}}.{{.Domain}}"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                 which obtains its values from the Spec.Hostname and")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                 Org.Domain, respectively.")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   - SANS:       (Optional) Specifies one or more Subject Alternative Names")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                 to be set in the resulting x509. Accepts template")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                 variables {{.Hostname}}, {{.Domain}}, {{.CommonName}}. IP")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                 addresses provided here will be properly recognized. Other")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                 values will be taken as DNS names.")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                 NOTE: Two implicit entries are created for you:")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                     - {{ .CommonName }}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#                     - {{ .Hostname }}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Specs:")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   - Hostname: foo # implicitly "foo.org1.example.com"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     CommonName: foo27.org5.example.com # overrides Hostname-based FQDN set above")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     SANS:")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#       - "bar.{{.Domain}}"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#       - "altfoo.{{.Domain}}"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#       - "{{.Hostname}}.org6.net"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#       - 172.16.10.31")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   - Hostname: bar")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   - Hostname: baz")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "Template"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Allows for the definition of 1 or more hosts that are created sequentially")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# from a template. By default, this looks like "peer%d" from 0 to Count-1.')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# You may override the number of nodes (Count), the starting index (Start)")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or the template used to construct the name (Hostname).")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Note: Template and Specs are not mutually exclusive.  You may define both")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# sections and the aggregate nodes will be created for you.  Take care with")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# name collisions")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Template")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Count")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Start: 5")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Hostname: {{.Prefix}}{{.Index}} # default")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# SANS:")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   - "{{.Hostname}}.alt.{{.Domain}}"')]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "Users"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Count: The number of user accounts _in addition_ to Admin")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Users")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Count")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# Org2: See "Org1" for full specification')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------------------------------------------------")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Org2\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Domain")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" org2.example.com\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("EnableNodeOUs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Template")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Count")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Users")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Count")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n")])])]),e("h3",{attrs:{id:"生成组织身份文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生成组织身份文件"}},[t._v("#")]),t._v(" 生成组织身份文件")]),t._v(" "),e("p",[t._v("根据 "),e("code",[t._v("crypto-config.yaml")]),t._v(" 配置文件生成组织身份文件并保存在 "),e("code",[t._v("../crypto-config")]),t._v(" 目录下。")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("./cryptogen generate "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--config")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/crypto-config.yaml "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--output")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/crypto-config\n")])])]),e("p",[t._v("用户修改配置后，还可以通过 extend 子命令来更新 "),e("code",[t._v("crypto-config")]),t._v(" 目录:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("./cryptogen extend "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--config")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/crypto-config.yaml "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--input")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/crypto-config\n")])])]),e("p",[t._v("得到的 "),e("code",[t._v("crypto-config")]),t._v(" 目录结构如下：")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@xxz10 bin"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# tree ../crypto-config")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/crypto-config\n├── ordererOrganizations\n│   └── example.com\n│       ├── ca\n│       │   ├── ca.example.com-cert.pem\n│       │   └── priv_sk\n│       ├── msp\n│       │   ├── admincerts\n│       │   ├── cacerts\n│       │   │   └── ca.example.com-cert.pem\n│       │   ├── config.yaml\n│       │   └── tlscacerts\n│       │       └── tlsca.example.com-cert.pem\n│       ├── orderers\n│       │   ├── orderer0.example.com\n│       │   │   ├── msp\n│       │   │   │   ├── admincerts\n│       │   │   │   ├── cacerts\n│       │   │   │   │   └── ca.example.com-cert.pem\n│       │   │   │   ├── config.yaml\n│       │   │   │   ├── keystore\n│       │   │   │   │   └── priv_sk\n│       │   │   │   ├── signcerts\n│       │   │   │   │   └── orderer0.example.com-cert.pem\n│       │   │   │   └── tlscacerts\n│       │   │   │       └── tlsca.example.com-cert.pem\n│       │   │   └── tls\n│       │   │       ├── ca.crt\n│       │   │       ├── server.crt\n│       │   │       └── server.key\n│       │   ├── orderer1.example.com\n│       │   │   ├── msp\n│       │   │   │   ├── admincerts\n│       │   │   │   ├── cacerts\n│       │   │   │   │   └── ca.example.com-cert.pem\n│       │   │   │   ├── config.yaml\n│       │   │   │   ├── keystore\n│       │   │   │   │   └── priv_sk\n│       │   │   │   ├── signcerts\n│       │   │   │   │   └── orderer1.example.com-cert.pem\n│       │   │   │   └── tlscacerts\n│       │   │   │       └── tlsca.example.com-cert.pem\n│       │   │   └── tls\n│       │   │       ├── ca.crt\n│       │   │       ├── server.crt\n│       │   │       └── server.key\n│       │   └── orderer2.example.com\n│       │       ├── msp\n│       │       │   ├── admincerts\n│       │       │   ├── cacerts\n│       │       │   │   └── ca.example.com-cert.pem\n│       │       │   ├── config.yaml\n│       │       │   ├── keystore\n│       │       │   │   └── priv_sk\n│       │       │   ├── signcerts\n│       │       │   │   └── orderer2.example.com-cert.pem\n│       │       │   └── tlscacerts\n│       │       │       └── tlsca.example.com-cert.pem\n│       │       └── tls\n│       │           ├── ca.crt\n│       │           ├── server.crt\n│       │           └── server.key\n│       ├── tlsca\n│       │   ├── priv_sk\n│       │   └── tlsca.example.com-cert.pem\n│       └── "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("users")]),t._v("\n│           └── Admin@example.com\n│               ├── msp\n│               │   ├── admincerts\n│               │   ├── cacerts\n│               │   │   └── ca.example.com-cert.pem\n│               │   ├── config.yaml\n│               │   ├── keystore\n│               │   │   └── priv_sk\n│               │   ├── signcerts\n│               │   │   └── Admin@example.com-cert.pem\n│               │   └── tlscacerts\n│               │       └── tlsca.example.com-cert.pem\n│               └── tls\n│                   ├── ca.crt\n│                   ├── client.crt\n│                   └── client.key\n└── peerOrganizations\n    ├── org1.example.com\n    │   ├── ca\n    │   │   ├── ca.org1.example.com-cert.pem\n    │   │   └── priv_sk\n    │   ├── msp\n    │   │   ├── admincerts\n    │   │   ├── cacerts\n    │   │   │   └── ca.org1.example.com-cert.pem\n    │   │   ├── config.yaml\n    │   │   └── tlscacerts\n    │   │       └── tlsca.org1.example.com-cert.pem\n    │   ├── peers\n    │   │   ├── peer0.org1.example.com\n    │   │   │   ├── msp\n    │   │   │   │   ├── admincerts\n    │   │   │   │   ├── cacerts\n    │   │   │   │   │   └── ca.org1.example.com-cert.pem\n    │   │   │   │   ├── config.yaml\n    │   │   │   │   ├── keystore\n    │   │   │   │   │   └── priv_sk\n    │   │   │   │   ├── signcerts\n    │   │   │   │   │   └── peer0.org1.example.com-cert.pem\n    │   │   │   │   └── tlscacerts\n    │   │   │   │       └── tlsca.org1.example.com-cert.pem\n    │   │   │   └── tls\n    │   │   │       ├── ca.crt\n    │   │   │       ├── server.crt\n    │   │   │       └── server.key\n    │   │   └── peer1.org1.example.com\n    │   │       ├── msp\n    │   │       │   ├── admincerts\n    │   │       │   ├── cacerts\n    │   │       │   │   └── ca.org1.example.com-cert.pem\n    │   │       │   ├── config.yaml\n    │   │       │   ├── keystore\n    │   │       │   │   └── priv_sk\n    │   │       │   ├── signcerts\n    │   │       │   │   └── peer1.org1.example.com-cert.pem\n    │   │       │   └── tlscacerts\n    │   │       │       └── tlsca.org1.example.com-cert.pem\n    │   │       └── tls\n    │   │           ├── ca.crt\n    │   │           ├── server.crt\n    │   │           └── server.key\n    │   ├── tlsca\n    │   │   ├── priv_sk\n    │   │   └── tlsca.org1.example.com-cert.pem\n    │   └── "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("users")]),t._v("\n    │       ├── Admin@org1.example.com\n    │       │   ├── msp\n    │       │   │   ├── admincerts\n    │       │   │   ├── cacerts\n    │       │   │   │   └── ca.org1.example.com-cert.pem\n    │       │   │   ├── config.yaml\n    │       │   │   ├── keystore\n    │       │   │   │   └── priv_sk\n    │       │   │   ├── signcerts\n    │       │   │   │   └── Admin@org1.example.com-cert.pem\n    │       │   │   └── tlscacerts\n    │       │   │       └── tlsca.org1.example.com-cert.pem\n    │       │   └── tls\n    │       │       ├── ca.crt\n    │       │       ├── client.crt\n    │       │       └── client.key\n    │       └── User1@org1.example.com\n    │           ├── msp\n    │           │   ├── admincerts\n    │           │   ├── cacerts\n    │           │   │   └── ca.org1.example.com-cert.pem\n    │           │   ├── config.yaml\n    │           │   ├── keystore\n    │           │   │   └── priv_sk\n    │           │   ├── signcerts\n    │           │   │   └── User1@org1.example.com-cert.pem\n    │           │   └── tlscacerts\n    │           │       └── tlsca.org1.example.com-cert.pem\n    │           └── tls\n    │               ├── ca.crt\n    │               ├── client.crt\n    │               └── client.key\n    └── org2.example.com\n        ├── ca\n        │   ├── ca.org2.example.com-cert.pem\n        │   └── priv_sk\n        ├── msp\n        │   ├── admincerts\n        │   ├── cacerts\n        │   │   └── ca.org2.example.com-cert.pem\n        │   ├── config.yaml\n        │   └── tlscacerts\n        │       └── tlsca.org2.example.com-cert.pem\n        ├── peers\n        │   ├── peer0.org2.example.com\n        │   │   ├── msp\n        │   │   │   ├── admincerts\n        │   │   │   ├── cacerts\n        │   │   │   │   └── ca.org2.example.com-cert.pem\n        │   │   │   ├── config.yaml\n        │   │   │   ├── keystore\n        │   │   │   │   └── priv_sk\n        │   │   │   ├── signcerts\n        │   │   │   │   └── peer0.org2.example.com-cert.pem\n        │   │   │   └── tlscacerts\n        │   │   │       └── tlsca.org2.example.com-cert.pem\n        │   │   └── tls\n        │   │       ├── ca.crt\n        │   │       ├── server.crt\n        │   │       └── server.key\n        │   └── peer1.org2.example.com\n        │       ├── msp\n        │       │   ├── admincerts\n        │       │   ├── cacerts\n        │       │   │   └── ca.org2.example.com-cert.pem\n        │       │   ├── config.yaml\n        │       │   ├── keystore\n        │       │   │   └── priv_sk\n        │       │   ├── signcerts\n        │       │   │   └── peer1.org2.example.com-cert.pem\n        │       │   └── tlscacerts\n        │       │       └── tlsca.org2.example.com-cert.pem\n        │       └── tls\n        │           ├── ca.crt\n        │           ├── server.crt\n        │           └── server.key\n        ├── tlsca\n        │   ├── priv_sk\n        │   └── tlsca.org2.example.com-cert.pem\n        └── "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("users")]),t._v("\n            ├── Admin@org2.example.com\n            │   ├── msp\n            │   │   ├── admincerts\n            │   │   ├── cacerts\n            │   │   │   └── ca.org2.example.com-cert.pem\n            │   │   ├── config.yaml\n            │   │   ├── keystore\n            │   │   │   └── priv_sk\n            │   │   ├── signcerts\n            │   │   │   └── Admin@org2.example.com-cert.pem\n            │   │   └── tlscacerts\n            │   │       └── tlsca.org2.example.com-cert.pem\n            │   └── tls\n            │       ├── ca.crt\n            │       ├── client.crt\n            │       └── client.key\n            └── User1@org2.example.com\n                ├── msp\n                │   ├── admincerts\n                │   ├── cacerts\n                │   │   └── ca.org2.example.com-cert.pem\n                │   ├── config.yaml\n                │   ├── keystore\n                │   │   └── priv_sk\n                │   ├── signcerts\n                │   │   └── User1@org2.example.com-cert.pem\n                │   └── tlscacerts\n                │       └── tlsca.org2.example.com-cert.pem\n                └── tls\n                    ├── ca.crt\n                    ├── client.crt\n                    └── client.key\n\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("125")]),t._v(" directories, "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("117")]),t._v(" files\n")])])]),e("h2",{attrs:{id:"生成系统通道初始区块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生成系统通道初始区块"}},[t._v("#")]),t._v(" 生成系统通道初始区块")]),t._v(" "),e("blockquote",[e("p",[t._v("可以使用 "),e("code",[t._v("configtxgen")]),t._v(" 工具生成，生成过程依赖 "),e("code",[t._v("config")]),t._v(" 目录下的"),e("code",[t._v("configtx.yaml")]),t._v(" 配置文件，"),e("code",[t._v("configtx.yaml")]),t._v(" 配置文件定义了整个网络中的相关配置和拓扑结构信息 。")])]),t._v(" "),e("p",[t._v("编辑 "),e("code",[t._v("configtx.yaml")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("修改 "),e("code",[t._v("Organizations")]),t._v(" 数组下的第一项 "),e("code",[t._v("\\- &SampleOrg")]),t._v(" 为自己定义的排序组织 "),e("code",[t._v("\\- &OrdererOrg")]),t._v("，同时修改该字段下的：")]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("Name")]),t._v(" 为 "),e("code",[t._v("OrdererOrg")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("ID")]),t._v(" 为 "),e("code",[t._v("OrdererMSP")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("MSPDIR")]),t._v(" 为上一步中生成的身份文件中排序组织的 "),e("code",[t._v("msp")]),t._v("目录 "),e("code",[t._v("/root/project/my-fabric/crypto-config/ordererOrganizations/example.com/msp")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("Policies")]),t._v(" 下的 "),e("code",[t._v("*.Rule: \"OR('SampleOrg.member')\"")]),t._v("中的 "),e("code",[t._v("SampleOrg")]),t._v(" 修改为"),e("code",[t._v("ID")]),t._v("： "),e("code",[t._v("\"OR('OrdererMSP.member')”")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("OrdererEndpoints")]),t._v(" 数组修改为：order 节点的 "),e("code",[t._v("{hostname}.{domin}:{port}")]),t._v("：")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("OrdererEndpoints:\n            - "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer0.example.com:7050"')]),t._v("\n            - "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer1.example.com:8050"')]),t._v("\n            - "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderer2.example.com:9050"')]),t._v("\n")])])]),e("p",[t._v("==注：单机环境下模拟多节点须区别端口号==")])]),t._v(" "),e("li",[e("p",[t._v("将锚点节点 "),e("code",[t._v("AnchorPeers")]),t._v(" 注释")])])])]),t._v(" "),e("li",[e("p",[t._v("根据 "),e("code",[t._v("OrdererOrg")]),t._v(" 的配置，在 "),e("code",[t._v("Organizations")]),t._v(" 数组下新增 "),e("code",[t._v("Org1")]),t._v("，"),e("code",[t._v("Org2")]),t._v(" 节点")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("&Org1")]),t._v("\n\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Org1MSP\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ID")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Org1MSP\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MSPDir")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /root/project/my"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("fabric/crypto"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/peerOrganizations/org1.example.com/msp\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Policies")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Readers")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Signature\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Rule")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"OR('Org1MSP.admin', 'Org1MSP.peer', 'Org1MSP.client')\"")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Writers")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Signature\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Rule")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"OR('Org1MSP.admin', 'Org1MSP.client')\"")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Admins")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Signature\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Rule")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"OR('Org1MSP.admin')\"")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Endorsement")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Signature\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Rule")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"OR('Org1MSP.peer')\"")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("AnchorPeers")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Host")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" peer0.org1.example.com\n              "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Port")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("7051")]),t._v("\n\n\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("&Org2")]),t._v("\n\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Org2MSP\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ID")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Org2MSP\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MSPDir")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /root/project/my"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("fabric/crypto"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/peerOrganizations/org2.example.com/msp\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Policies")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Readers")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Signature\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Rule")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"OR('Org2MSP.admin', 'Org2MSP.peer', 'Org2MSP.client')\"")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Writers")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Signature\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Rule")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"OR('Org2MSP.admin', 'Org2MSP.client')\"")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Admins")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Signature\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Rule")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"OR('Org2MSP.admin')\"")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Endorsement")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Signature\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Rule")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"OR('Org2MSP.peer')\"")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("AnchorPeers")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Host")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" peer0.org2.example.com\n              "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Port")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("9051")]),t._v("\n")])])]),e("p",[t._v("==注：单机环境下模拟连个组织须区别端口号==")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("Orderer")]),t._v(" 配置项下：")]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("OrdererType")]),t._v(" 为 "),e("code",[t._v("etcdraft")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("Addresses")]),t._v("  为 "),e("code",[t._v("OrdererEndpoints")]),t._v(" 数组")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("EtcdRaft.Consenters")]),t._v(" 数组的 "),e("code",[t._v("Host")]),t._v("、"),e("code",[t._v("Port")]),t._v("，根据 "),e("code",[t._v("OrdererEndpoints")]),t._v(" 修改，"),e("code",[t._v("ClientTLSCert")]),t._v("、"),e("code",[t._v("ServerTLSCert")]),t._v(" 为：身份文件中每个排序节点的 "),e("code",[t._v("tls/server.crt")]),t._v(" 文件的目录：")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("EtcdRaft")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The set of Raft replicas for this network. For the etcd/raft-based")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# implementation, we expect every replica to also be an OSN. Therefore,")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# a subset of the host:port items enumerated in this list should be")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# replicated under the Orderer.Addresses key above.")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Consenters")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Host")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" orderer0.example.com\n              "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Port")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("7050")]),t._v("\n              "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ClientTLSCert")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /root/project/my"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("fabric/crypto"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/ordererOrganizations/example.com/orderers/orderer0.example.com/tls/server.crt\n              "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ServerTLSCert")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /root/project/my"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("fabric/crypto"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/ordererOrganizations/example.com/orderers/orderer0.example.com/tls/server.crt\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Host")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" orderer1.example.com\n              "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Port")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8050")]),t._v("\n              "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ClientTLSCert")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /root/project/my"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("fabric/crypto"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/ordererOrganizations/example.com/orderers/orderer1.example.com/tls/server.crt\n              "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ServerTLSCert")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /root/project/my"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("fabric/crypto"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/ordererOrganizations/example.com/orderers/orderer1.example.com/tls/server.crt\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Host")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" orderer2.example.com\n              "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Port")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("9050")]),t._v("\n              "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ClientTLSCert")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /root/project/my"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("fabric/crypto"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/ordererOrganizations/example.com/orderers/orderer2.example.com/tls/server.crt\n              "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ServerTLSCert")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /root/project/my"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("fabric/crypto"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config/ordererOrganizations/example.com/orderers/orderer2.example.com/tls/server.crt\n")])])])])])]),t._v(" "),e("li",[e("p",[t._v("修改 "),e("code",[t._v("Profiles")]),t._v(" 配置")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Profiles")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("TwoOrgsOrdererGenesis")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("<<")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("*ChannelDefaults")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Orderer")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("<<")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("*OrdererDefaults")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Organizations")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("*OrdererOrg")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Capabilities")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("<<")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("*OrdererCapabilities")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Consortiums")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("SampleConsortium")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Organizations")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("*Org1")]),t._v("\n                    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("*Org2")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("TwoOrgsChannel")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Consortium")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" SampleConsortium\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("<<")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("*ChannelDefaults")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Application")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("<<")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("*ApplicationDefaults")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Organizations")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("*Org1")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("*Org2")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Capabilities")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("<<")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("*ApplicationCapabilities")]),t._v("\n")])])])])]),t._v(" "),e("p",[t._v("完整配置文件"),e("a",{attrs:{href:"https://mydoc-pics.oss-cn-chengdu.aliyuncs.com/fabric-config/configtx.yaml",target:"_blank",rel:"noopener noreferrer"}},[t._v("configtx.yaml"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("生成创世区块：")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("./configtxgen "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-configPath")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/config  "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-profile")]),t._v(" TwoOrgsOrdererGenesis "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-channelID")]),t._v(" fabric-channel "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-outputBlock")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/channel-artifacts/orderer.genesis.block\n")])])]),e("p",[t._v("生成通道文件：")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("./configtxgen "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-configPath")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/config  "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-profile")]),t._v(" TwoOrgsChannel  "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-channelID")]),t._v(" businesschannel "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-outputCreateChannelTx")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/channel-artifacts/businesschannel.tx\n")])])]),e("p",[t._v("生成锚节点配置更新文件：")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("./configtxgen "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-configPath")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/config  "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-profile")]),t._v(" TwoOrgsChannel "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-channelID")]),t._v(" businesschannel "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-asOrg")]),t._v(" Org1MSP "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-outputAnchorPeersUpdate")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/channel-artifacts/Org1MSPanchors.tx\n\n./configtxgen "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-configPath")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/config  "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-profile")]),t._v(" TwoOrgsChannel "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-channelID")]),t._v(" businesschannel "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-asOrg")]),t._v(" Org2MSP "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-outputAnchorPeersUpdate")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/channel-artifacts/Org2MSPanchors.tx\n")])])]),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("channel-artifacts/\n├── businesschannel.tx\n├── orderer.genesis.block\n├── Org1MSPanchors.tx\n└── Org2MSPanchors.tx\n")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);